{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport { localDate, localTime } from \"../utils/formatFunctions\";\nimport { useNavigation } from '@react-navigation/native';\nimport eventApi from \"../api/eventApi\";\nimport { useAppContext } from \"./AppContext\";\nimport Toast from 'react-native-root-toast';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar EventCard = function EventCard(_ref) {\n  var event = _ref.event;\n  var _useAppContext = useAppContext(),\n    myRsvps = _useAppContext.myRsvps,\n    myEvents = _useAppContext.myEvents,\n    setMyEvents = _useAppContext.setMyEvents,\n    user = _useAppContext.user,\n    setMyRsvps = _useAppContext.setMyRsvps,\n    setBrowseEvents = _useAppContext.setBrowseEvents;\n  var navigation = useNavigation();\n  var handleViewDetails = function handleViewDetails() {\n    navigation.navigate('Event Details', {\n      event: event\n    });\n  };\n  var showToast = function showToast(message, backgroundColor) {\n    Toast.show(message, {\n      duration: Toast.durations.SHORT,\n      position: -80,\n      shadow: true,\n      backgroundColor: backgroundColor,\n      animation: true\n    });\n  };\n  var handleRSVP = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var rsvpAttempt = yield eventApi.rsvp(event._id, user._id);\n        if (rsvpAttempt === 'RSVP') {\n          showToast(`You are now attending ${event.eventName}!`, 'green');\n          setMyRsvps([].concat(_toConsumableArray(myRsvps), [event]));\n        } else {\n          showToast(`No longer attending ${event.eventName}!`, 'orangered');\n          setMyRsvps(myRsvps.filter(function (rsvp) {\n            return rsvp._id !== event._id;\n          }));\n        }\n        return rsvpAttempt;\n      } catch (err) {\n        showToast(`${event.eventName} no longer exists!`, 'red');\n      }\n    });\n    return function handleRSVP() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var handleDelete = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      try {\n        var attemptDelete = yield eventApi.delete(event._id, user._id);\n        if (attemptDelete.message === 'Deleted') {\n          setMyEvents(myEvents.filter(function (myEvent) {\n            return myEvent._id !== event._id;\n          }));\n          setBrowseEvents(function (prevEvents) {\n            return prevEvents.filter(function (prevEvent) {\n              return prevEvent._id !== event._id;\n            });\n          });\n          showToast(`${event.eventName} successfully deleted!`, 'red');\n        }\n        return attemptDelete;\n      } catch (err) {\n        console.error('Error deleting event:', err);\n        showToast(`${event.eventName} no longer exists`, 'red');\n      }\n    });\n    return function handleDelete() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  return _jsxs(View, {\n    style: styles.card,\n    children: [_jsxs(View, {\n      style: styles.row,\n      children: [_jsx(Text, {\n        style: styles.title,\n        children: event.eventName\n      }), _jsx(Pressable, {\n        onPress: handleViewDetails,\n        children: _jsx(Image, {\n          source: require(\"../assets/viewDetails.png\"),\n          style: styles.icon\n        })\n      }), user._id !== event.host._id ? _jsx(Pressable, {\n        onPress: function onPress() {\n          return handleRSVP(event._id);\n        },\n        children: _jsx(Image, {\n          source: require(\"../assets/rsvp.png\"),\n          style: styles.icon\n        })\n      }) : _jsx(Pressable, {\n        onPress: handleDelete,\n        children: _jsx(Image, {\n          source: require(\"../assets/delete.png\"),\n          style: styles.icon\n        })\n      })]\n    }), _jsx(Text, {\n      children: event.description\n    }), _jsx(Text, {\n      children: event.host.username\n    }), _jsxs(Text, {\n      children: [\"Date: \", localDate(event.date)]\n    }), _jsxs(Text, {\n      children: [\"Start Time: \", localTime(event.startTime)]\n    }), _jsxs(Text, {\n      children: [\"End Time: \", localTime(event.endTime)]\n    }), event.pictures && event.pictures.length > 0 && _jsx(View, {\n      style: styles.imageContainer,\n      children: event.pictures.map(function (picture, index) {\n        return _jsx(Image, {\n          source: {\n            uri: picture\n          },\n          style: styles.image\n        }, index);\n      })\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  card: {\n    backgroundColor: 'white',\n    padding: 16,\n    borderRadius: 8,\n    margin: 8,\n    elevation: 2\n  },\n  title: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginBottom: 8\n  },\n  row: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 8\n  },\n  icon: {\n    width: 24,\n    height: 24\n  }\n});\nexport default EventCard;","map":{"version":3,"names":["React","View","Text","StyleSheet","Image","Pressable","localDate","localTime","useNavigation","eventApi","useAppContext","Toast","jsx","_jsx","jsxs","_jsxs","EventCard","_ref","event","_useAppContext","myRsvps","myEvents","setMyEvents","user","setMyRsvps","setBrowseEvents","navigation","handleViewDetails","navigate","showToast","message","backgroundColor","show","duration","durations","SHORT","position","shadow","animation","handleRSVP","_ref2","_asyncToGenerator","rsvpAttempt","rsvp","_id","eventName","concat","_toConsumableArray","filter","err","apply","arguments","handleDelete","_ref3","attemptDelete","delete","myEvent","prevEvents","prevEvent","console","error","style","styles","card","children","row","title","onPress","source","require","icon","host","description","username","date","startTime","endTime","pictures","length","imageContainer","map","picture","index","uri","image","create","padding","borderRadius","margin","elevation","fontSize","fontWeight","marginBottom","flexDirection","justifyContent","alignItems","width","height"],"sources":["C:/Users/dyarb/batcave/Meetup_2.0/client/components/EventCard.js"],"sourcesContent":["import React from 'react';\r\nimport { View, Text, StyleSheet, Image, Pressable } from 'react-native';\r\nimport { localDate, localTime } from '../utils/formatFunctions';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport eventApi from '../api/eventApi';\r\nimport { useAppContext } from './AppContext';\r\nimport Toast from 'react-native-root-toast';\r\n\r\nconst EventCard = ({ event }) => {\r\n  const {\r\n    myRsvps,\r\n    myEvents,\r\n    setMyEvents,\r\n    user,\r\n    setMyRsvps,\r\n    setBrowseEvents,\r\n  } = useAppContext();\r\n  const navigation = useNavigation();\r\n\r\n  const handleViewDetails = () => {\r\n    navigation.navigate('Event Details', { event });\r\n  };\r\n\r\n  const showToast = (message, backgroundColor) => {\r\n    Toast.show(message, {\r\n      duration: Toast.durations.SHORT,\r\n      position: -80,\r\n      shadow: true,\r\n      backgroundColor,\r\n      animation: true,\r\n    });\r\n  };\r\n\r\n  const handleRSVP = async () => {\r\n    try {\r\n      const rsvpAttempt = await eventApi.rsvp(event._id, user._id);\r\n      if (rsvpAttempt === 'RSVP') {\r\n        showToast(`You are now attending ${event.eventName}!`, 'green');\r\n        setMyRsvps([...myRsvps, event]);\r\n      } else {\r\n        showToast(`No longer attending ${event.eventName}!`, 'orangered');\r\n        setMyRsvps(myRsvps.filter((rsvp) => rsvp._id !== event._id));\r\n      }\r\n      return rsvpAttempt;\r\n    } catch (err) {\r\n      showToast(`${event.eventName} no longer exists!`, 'red');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      const attemptDelete = await eventApi.delete(event._id, user._id);\r\n\r\n      if (attemptDelete.message === 'Deleted') {\r\n        setMyEvents(myEvents.filter((myEvent) => myEvent._id !== event._id));\r\n        setBrowseEvents((prevEvents) =>\r\n          prevEvents.filter((prevEvent) => prevEvent._id !== event._id)\r\n        );\r\n\r\n        showToast(`${event.eventName} successfully deleted!`, 'red');\r\n      }\r\n      return attemptDelete;\r\n    } catch (err) {\r\n      console.error('Error deleting event:', err);\r\n      showToast(`${event.eventName} no longer exists`, 'red');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <View style={styles.card}>\r\n      <View style={styles.row}>\r\n        <Text style={styles.title}>{event.eventName}</Text>\r\n\r\n        <Pressable onPress={handleViewDetails}>\r\n          <Image\r\n            source={require('../assets/viewDetails.png')}\r\n            style={styles.icon}\r\n          />\r\n        </Pressable>\r\n\r\n        {user._id !== event.host._id ? (\r\n          <Pressable onPress={() => handleRSVP(event._id)}>\r\n            <Image source={require('../assets/rsvp.png')} style={styles.icon} />\r\n          </Pressable>\r\n        ) : (\r\n          <Pressable onPress={handleDelete}>\r\n            <Image\r\n              source={require('../assets/delete.png')}\r\n              style={styles.icon}\r\n            />\r\n          </Pressable>\r\n        )}\r\n      </View>\r\n\r\n      <Text>{event.description}</Text>\r\n      <Text>{event.host.username}</Text>\r\n      <Text>Date: {localDate(event.date)}</Text>\r\n      <Text>Start Time: {localTime(event.startTime)}</Text>\r\n      <Text>End Time: {localTime(event.endTime)}</Text>\r\n\r\n      {event.pictures && event.pictures.length > 0 && (\r\n        <View style={styles.imageContainer}>\r\n          {event.pictures.map((picture, index) => (\r\n            <Image key={index} source={{ uri: picture }} style={styles.image} />\r\n          ))}\r\n        </View>\r\n      )}\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  card: {\r\n    backgroundColor: 'white',\r\n    padding: 16,\r\n    borderRadius: 8,\r\n    margin: 8,\r\n    elevation: 2,\r\n  },\r\n  title: {\r\n    fontSize: 18,\r\n    fontWeight: 'bold',\r\n    marginBottom: 8,\r\n  },\r\n  row: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: 8,\r\n  },\r\n  icon: {\r\n    width: 24,\r\n    height: 24,\r\n  },\r\n});\r\n\r\nexport default EventCard;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}