{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport React, { useEffect, useState } from 'react';\nimport AppRegistry from \"react-native-web/dist/exports/AppRegistry\";\nimport ChildrenWrapper from \"./ChildrenWrapper\";\nimport wrapRootComponent from \"./wrapRootComponent\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar siblingWrapper = function siblingWrapper(sibling) {\n  return sibling;\n};\nfunction renderSibling(sibling) {\n  return siblingWrapper(sibling);\n}\nif (!global.__rootSiblingsInjected && !global.__rootSiblingsDisabled) {\n  AppRegistry.setWrapperComponentProvider(function () {\n    return Root;\n  });\n  global.__rootSiblingsInjected = true;\n}\nexport function setSiblingWrapper(wrapper) {\n  siblingWrapper = wrapper;\n}\nvar _wrapRootComponent = wrapRootComponent(ChildrenWrapper, renderSibling),\n  Root = _wrapRootComponent.Root,\n  defaultManager = _wrapRootComponent.manager;\nvar uuid = 0;\nvar managerStack = [defaultManager];\nvar inactiveManagers = new Set();\nfunction getActiveManager() {\n  for (var i = managerStack.length - 1; i >= 0; i--) {\n    var manager = managerStack[i];\n    if (!inactiveManagers.has(manager)) {\n      return manager;\n    }\n  }\n  return defaultManager;\n}\nvar RootSiblingsManager = function () {\n  function RootSiblingsManager(element, callback) {\n    _classCallCheck(this, RootSiblingsManager);\n    this.id = `root-sibling-${uuid + 1}`;\n    this.manager = getActiveManager();\n    this.manager.update(this.id, element, callback);\n    uuid++;\n  }\n  _createClass(RootSiblingsManager, [{\n    key: \"update\",\n    value: function update(element, callback) {\n      this.manager.update(this.id, element, callback);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy(callback) {\n      this.manager.destroy(this.id, callback);\n    }\n  }]);\n  return RootSiblingsManager;\n}();\nexport { RootSiblingsManager as default };\nexport function RootSiblingParent(props) {\n  var inactive = props.inactive;\n  var _useState = useState(function () {\n      var _wrapRootComponent2 = wrapRootComponent(ChildrenWrapper, renderSibling),\n        parentRoot = _wrapRootComponent2.Root,\n        parentManager = _wrapRootComponent2.manager;\n      managerStack.push(parentManager);\n      if (inactive) {\n        inactiveManagers.add(parentManager);\n      }\n      return {\n        Root: parentRoot,\n        manager: parentManager\n      };\n    }),\n    _useState2 = _slicedToArray(_useState, 1),\n    sibling = _useState2[0];\n  useEffect(function () {\n    return function () {\n      if (sibling) {\n        var index = managerStack.indexOf(sibling.manager);\n        if (index > 0) {\n          managerStack.splice(index, 1);\n        }\n      }\n    };\n  }, [sibling]);\n  if (inactive && sibling && !inactiveManagers.has(sibling.manager)) {\n    inactiveManagers.add(sibling.manager);\n  } else if (!inactive && sibling && inactiveManagers.has(sibling.manager)) {\n    inactiveManagers.delete(sibling.manager);\n  }\n  var Parent = sibling.Root;\n  return _jsx(Parent, {\n    children: props.children\n  });\n}\nexport function RootSiblingPortal(props) {\n  var _useState3 = useState(function () {\n      return new RootSiblingsManager(null);\n    }),\n    _useState4 = _slicedToArray(_useState3, 1),\n    sibling = _useState4[0];\n  sibling.update(props.children);\n  useEffect(function () {\n    if (sibling) {\n      return function () {\n        return sibling.destroy();\n      };\n    }\n  }, [sibling]);\n  return null;\n}","map":{"version":3,"names":["React","useEffect","useState","AppRegistry","ChildrenWrapper","wrapRootComponent","jsx","_jsx","siblingWrapper","sibling","renderSibling","global","__rootSiblingsInjected","__rootSiblingsDisabled","setWrapperComponentProvider","Root","setSiblingWrapper","wrapper","_wrapRootComponent","defaultManager","manager","uuid","managerStack","inactiveManagers","Set","getActiveManager","i","length","has","RootSiblingsManager","element","callback","_classCallCheck","id","update","_createClass","key","value","destroy","default","RootSiblingParent","props","inactive","_useState","_wrapRootComponent2","parentRoot","parentManager","push","add","_useState2","_slicedToArray","index","indexOf","splice","delete","Parent","children","RootSiblingPortal","_useState3","_useState4"],"sources":["C:\\Users\\dyarb\\batcave\\Meetup_2.0\\client\\node_modules\\react-native-root-toast\\node_modules\\react-native-root-siblings\\src\\RootSiblingsManager.tsx"],"sourcesContent":["import React, {\n  FunctionComponent,\n  ReactNode,\n  useEffect,\n  useState\n} from 'react';\nimport { AppRegistry } from 'react-native';\n\nimport ChildrenWrapper from './ChildrenWrapper';\nimport wrapRootComponent, { RootSiblingManager } from './wrapRootComponent';\n\nlet siblingWrapper: (sibling: ReactNode) => ReactNode = sibling => sibling;\n\nfunction renderSibling(sibling: ReactNode): ReactNode {\n  return siblingWrapper(sibling);\n}\n\nif (!global.__rootSiblingsInjected && !global.__rootSiblingsDisabled) {\n  AppRegistry.setWrapperComponentProvider(() => {\n    return Root;\n  });\n  global.__rootSiblingsInjected = true;\n}\n\nexport function setSiblingWrapper(wrapper: (sibling: ReactNode) => ReactNode) {\n  siblingWrapper = wrapper;\n}\n\nconst { Root, manager: defaultManager } = wrapRootComponent(\n  ChildrenWrapper,\n  renderSibling\n);\nlet uuid: number = 0;\nconst managerStack: RootSiblingManager[] = [defaultManager];\nconst inactiveManagers: Set<RootSiblingManager> = new Set();\n\nfunction getActiveManager(): RootSiblingManager {\n  for (let i = managerStack.length - 1; i >= 0; i--) {\n    const manager = managerStack[i];\n    if (!inactiveManagers.has(manager)) {\n      return manager;\n    }\n  }\n\n  return defaultManager;\n}\n\nexport default class RootSiblingsManager {\n  private id: string;\n  private manager: RootSiblingManager;\n\n  constructor(element: ReactNode, callback?: () => void) {\n    this.id = `root-sibling-${uuid + 1}`;\n    this.manager = getActiveManager();\n    this.manager.update(this.id, element, callback);\n    uuid++;\n  }\n\n  public update(element: ReactNode, callback?: () => void) {\n    this.manager.update(this.id, element, callback);\n  }\n\n  public destroy(callback?: () => void) {\n    this.manager.destroy(this.id, callback);\n  }\n}\n\nexport function RootSiblingParent(props: {\n  children: ReactNode;\n  inactive?: boolean;\n}) {\n  const { inactive } = props;\n  const [sibling] = useState<{\n    Root: FunctionComponent;\n    manager: RootSiblingManager;\n  }>(() => {\n    const { Root: parentRoot, manager: parentManager } = wrapRootComponent(\n      ChildrenWrapper,\n      renderSibling\n    );\n\n    managerStack.push(parentManager);\n    if (inactive) {\n      inactiveManagers.add(parentManager);\n    }\n\n    return {\n      Root: parentRoot,\n      manager: parentManager\n    };\n  });\n\n  useEffect(() => {\n    return () => {\n      if (sibling) {\n        const index = managerStack.indexOf(sibling.manager);\n        if (index > 0) {\n          managerStack.splice(index, 1);\n        }\n      }\n    };\n  }, [sibling]);\n\n  if (inactive && sibling && !inactiveManagers.has(sibling.manager)) {\n    inactiveManagers.add(sibling.manager);\n  } else if (!inactive && sibling && inactiveManagers.has(sibling.manager)) {\n    inactiveManagers.delete(sibling.manager);\n  }\n\n  const Parent = sibling.Root;\n  return <Parent>{props.children}</Parent>;\n}\n\nexport function RootSiblingPortal(props: { children: ReactNode }) {\n  const [sibling] = useState<RootSiblingsManager>(\n    () => new RootSiblingsManager(null)\n  );\n\n  sibling.update(props.children);\n\n  useEffect(() => {\n    if (sibling) {\n      return () => sibling.destroy();\n    }\n  }, [sibling]);\n\n  return null;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}